{"ast":null,"code":"var _jsxFileName = \"/home/tom/Projects/Job Assignments/VectorShift/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Handle, Position } from 'reactflow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [textValue, setTextValue] = useState((data === null || data === void 0 ? void 0 : data.text) || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const [nodeHeight, setNodeHeight] = useState(140);\n  const textRef = useRef(null);\n\n  // --- Parse {{variable}} patterns ---\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const found = Array.from(textValue.matchAll(regex)).map(m => m[1]);\n    setVariables([...new Set(found)]); // remove duplicates\n  }, [textValue]);\n\n  // --- Smooth auto-resize ---\n  useEffect(() => {\n    const el = textRef.current;\n    if (el) {\n      const prevScrollY = el.scrollTop;\n      el.style.height = 'auto';\n      const targetHeight = Math.min(Math.max(60, el.scrollHeight), 240);\n      el.style.height = `${targetHeight}px`;\n      const totalHeight = targetHeight + 90;\n      if (Math.abs(totalHeight - nodeHeight) > 5) setNodeHeight(totalHeight);\n      el.scrollTop = prevScrollY;\n    }\n  }, [textValue]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vs-node\",\n    style: {\n      width: 280,\n      height: nodeHeight,\n      position: 'relative',\n      transition: 'height 0.2s ease'\n    },\n    children: [variables.map((v, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n        left: -8,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n        transform: 'translateY(-50%)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Handle, {\n        type: \"target\",\n        position: Position.Left,\n        id: `${id}-${v}`,\n        style: {\n          left: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#a1a1aa',\n          fontSize: 11,\n          fontFamily: 'Inter, monospace',\n          background: '#1f1f29',\n          borderRadius: 4,\n          padding: '1px 4px'\n        },\n        children: v\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, v, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right,\n      id: `${id}-output`,\n      style: {\n        top: '50%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vs-node__title\",\n      children: \"Text\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"vs-label\",\n      style: {\n        flex: 1\n      },\n      children: [\"Text:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textRef,\n        className: \"vs-input\",\n        value: textValue,\n        onChange: e => setTextValue(e.target.value),\n        style: {\n          resize: 'none',\n          width: '100%',\n          lineHeight: 1.5,\n          overflowY: 'hidden',\n          background: '#2a2a34'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"YsU5j8LVgoMy74wgLdC1XmXiUJI=\");\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Handle","Position","jsxDEV","_jsxDEV","TextNode","id","data","_s","textValue","setTextValue","text","variables","setVariables","nodeHeight","setNodeHeight","textRef","regex","found","Array","from","matchAll","map","m","Set","el","current","prevScrollY","scrollTop","style","height","targetHeight","Math","min","max","scrollHeight","totalHeight","abs","className","width","position","transition","children","v","i","top","length","left","display","alignItems","gap","transform","type","Left","fileName","_jsxFileName","lineNumber","columnNumber","color","fontSize","fontFamily","background","borderRadius","padding","Right","flex","ref","value","onChange","e","target","resize","lineHeight","overflowY","_c","$RefreshReg$"],"sources":["/home/tom/Projects/Job Assignments/VectorShift/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Handle, Position } from 'reactflow';\n\nexport const TextNode = ({ id, data }) => {\n  const [textValue, setTextValue] = useState(data?.text || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const [nodeHeight, setNodeHeight] = useState(140);\n  const textRef = useRef(null);\n\n  // --- Parse {{variable}} patterns ---\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const found = Array.from(textValue.matchAll(regex)).map((m) => m[1]);\n    setVariables([...new Set(found)]); // remove duplicates\n  }, [textValue]);\n\n  // --- Smooth auto-resize ---\n  useEffect(() => {\n    const el = textRef.current;\n    if (el) {\n      const prevScrollY = el.scrollTop;\n      el.style.height = 'auto';\n      const targetHeight = Math.min(Math.max(60, el.scrollHeight), 240);\n      el.style.height = `${targetHeight}px`;\n      const totalHeight = targetHeight + 90;\n      if (Math.abs(totalHeight - nodeHeight) > 5) setNodeHeight(totalHeight);\n      el.scrollTop = prevScrollY;\n    }\n  }, [textValue]);\n\n  return (\n    <div\n      className=\"vs-node\"\n      style={{\n        width: 280,\n        height: nodeHeight,\n        position: 'relative',\n        transition: 'height 0.2s ease',\n      }}\n    >\n      {/* Variable handles with labels */}\n      {variables.map((v, i) => (\n        <div\n          key={v}\n          style={{\n            position: 'absolute',\n            top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n            left: -8,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transform: 'translateY(-50%)',\n          }}\n        >\n          <Handle\n            type=\"target\"\n            position={Position.Left}\n            id={`${id}-${v}`}\n            style={{ left: 0 }}\n          />\n          <span\n            style={{\n              color: '#a1a1aa',\n              fontSize: 11,\n              fontFamily: 'Inter, monospace',\n              background: '#1f1f29',\n              borderRadius: 4,\n              padding: '1px 4px',\n            }}\n          >\n            {v}\n          </span>\n        </div>\n      ))}\n\n      {/* Output handle */}\n      <Handle\n        type=\"source\"\n        position={Position.Right}\n        id={`${id}-output`}\n        style={{ top: '50%' }}\n      />\n\n      {/* Header */}\n      <div className=\"vs-node__title\">Text</div>\n\n      {/* Text area */}\n      <label className=\"vs-label\" style={{ flex: 1 }}>\n        Text:\n        <textarea\n          ref={textRef}\n          className=\"vs-input\"\n          value={textValue}\n          onChange={(e) => setTextValue(e.target.value)}\n          style={{\n            resize: 'none',\n            width: '100%',\n            lineHeight: 1.5,\n            overflowY: 'hidden',\n            background: '#2a2a34',\n          }}\n        />\n      </label>\n    </div>\n  );\n};\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,MAAM,EAAEC,QAAQ,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,OAAO,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,EAAE;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,CAAAS,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,KAAI,WAAW,CAAC;EACrE,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACgB,UAAU,EAAEC,aAAa,CAAC,GAAGjB,QAAQ,CAAC,GAAG,CAAC;EACjD,MAAMkB,OAAO,GAAGhB,MAAM,CAAC,IAAI,CAAC;;EAE5B;EACAD,SAAS,CAAC,MAAM;IACd,MAAMkB,KAAK,GAAG,2CAA2C;IACzD,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACX,SAAS,CAACY,QAAQ,CAACJ,KAAK,CAAC,CAAC,CAACK,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAAC,CAAC,CAAC,CAAC;IACpEV,YAAY,CAAC,CAAC,GAAG,IAAIW,GAAG,CAACN,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;EACrC,CAAC,EAAE,CAACT,SAAS,CAAC,CAAC;;EAEf;EACAV,SAAS,CAAC,MAAM;IACd,MAAM0B,EAAE,GAAGT,OAAO,CAACU,OAAO;IAC1B,IAAID,EAAE,EAAE;MACN,MAAME,WAAW,GAAGF,EAAE,CAACG,SAAS;MAChCH,EAAE,CAACI,KAAK,CAACC,MAAM,GAAG,MAAM;MACxB,MAAMC,YAAY,GAAGC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAAC,EAAE,EAAET,EAAE,CAACU,YAAY,CAAC,EAAE,GAAG,CAAC;MACjEV,EAAE,CAACI,KAAK,CAACC,MAAM,GAAI,GAAEC,YAAa,IAAG;MACrC,MAAMK,WAAW,GAAGL,YAAY,GAAG,EAAE;MACrC,IAAIC,IAAI,CAACK,GAAG,CAACD,WAAW,GAAGtB,UAAU,CAAC,GAAG,CAAC,EAAEC,aAAa,CAACqB,WAAW,CAAC;MACtEX,EAAE,CAACG,SAAS,GAAGD,WAAW;IAC5B;EACF,CAAC,EAAE,CAAClB,SAAS,CAAC,CAAC;EAEf,oBACEL,OAAA;IACEkC,SAAS,EAAC,SAAS;IACnBT,KAAK,EAAE;MACLU,KAAK,EAAE,GAAG;MACVT,MAAM,EAAEhB,UAAU;MAClB0B,QAAQ,EAAE,UAAU;MACpBC,UAAU,EAAE;IACd,CAAE;IAAAC,QAAA,GAGD9B,SAAS,CAACU,GAAG,CAAC,CAACqB,CAAC,EAAEC,CAAC,kBAClBxC,OAAA;MAEEyB,KAAK,EAAE;QACLW,QAAQ,EAAE,UAAU;QACpBK,GAAG,EAAG,GAAE,CAACD,CAAC,GAAG,CAAC,KAAK,GAAG,IAAIhC,SAAS,CAACkC,MAAM,GAAG,CAAC,CAAC,CAAE,GAAE;QACnDC,IAAI,EAAE,CAAC,CAAC;QACRC,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,GAAG,EAAE,CAAC;QACNC,SAAS,EAAE;MACb,CAAE;MAAAT,QAAA,gBAEFtC,OAAA,CAACH,MAAM;QACLmD,IAAI,EAAC,QAAQ;QACbZ,QAAQ,EAAEtC,QAAQ,CAACmD,IAAK;QACxB/C,EAAE,EAAG,GAAEA,EAAG,IAAGqC,CAAE,EAAE;QACjBd,KAAK,EAAE;UAAEkB,IAAI,EAAE;QAAE;MAAE;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CAAC,eACFrD,OAAA;QACEyB,KAAK,EAAE;UACL6B,KAAK,EAAE,SAAS;UAChBC,QAAQ,EAAE,EAAE;UACZC,UAAU,EAAE,kBAAkB;UAC9BC,UAAU,EAAE,SAAS;UACrBC,YAAY,EAAE,CAAC;UACfC,OAAO,EAAE;QACX,CAAE;QAAArB,QAAA,EAEDC;MAAC;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA,GA5BFd,CAAC;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OA6BH,CACN,CAAC,eAGFrD,OAAA,CAACH,MAAM;MACLmD,IAAI,EAAC,QAAQ;MACbZ,QAAQ,EAAEtC,QAAQ,CAAC8D,KAAM;MACzB1D,EAAE,EAAG,GAAEA,EAAG,SAAS;MACnBuB,KAAK,EAAE;QAAEgB,GAAG,EAAE;MAAM;IAAE;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvB,CAAC,eAGFrD,OAAA;MAAKkC,SAAS,EAAC,gBAAgB;MAAAI,QAAA,EAAC;IAAI;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAG1CrD,OAAA;MAAOkC,SAAS,EAAC,UAAU;MAACT,KAAK,EAAE;QAAEoC,IAAI,EAAE;MAAE,CAAE;MAAAvB,QAAA,GAAC,OAE9C,eAAAtC,OAAA;QACE8D,GAAG,EAAElD,OAAQ;QACbsB,SAAS,EAAC,UAAU;QACpB6B,KAAK,EAAE1D,SAAU;QACjB2D,QAAQ,EAAGC,CAAC,IAAK3D,YAAY,CAAC2D,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;QAC9CtC,KAAK,EAAE;UACL0C,MAAM,EAAE,MAAM;UACdhC,KAAK,EAAE,MAAM;UACbiC,UAAU,EAAE,GAAG;UACfC,SAAS,EAAE,QAAQ;UACnBZ,UAAU,EAAE;QACd;MAAE;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV,CAAC;AAACjD,EAAA,CAtGWH,QAAQ;AAAAqE,EAAA,GAARrE,QAAQ;AAAA,IAAAqE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}