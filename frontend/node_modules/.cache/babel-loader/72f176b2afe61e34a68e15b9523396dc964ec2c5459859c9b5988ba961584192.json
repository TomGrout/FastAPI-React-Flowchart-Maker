{"ast":null,"code":"var _jsxFileName = \"/home/tom/Projects/Job Assignments/VectorShift/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Handle, Position } from 'reactflow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [textValue, setTextValue] = useState((data === null || data === void 0 ? void 0 : data.text) || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const [height, setHeight] = useState(140);\n  const textRef = useRef(null);\n\n  // --- Parse {{variables}} into dynamic handles ---\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const found = Array.from(textValue.matchAll(regex)).map(m => m[1]);\n    setVariables([...new Set(found)]);\n  }, [textValue]);\n\n  // --- Adjust textarea height dynamically ---\n  useEffect(() => {\n    const el = textRef.current;\n    if (el) {\n      el.style.height = 'auto'; // reset to recalc\n      const scrollHeight = el.scrollHeight;\n      const newHeight = Math.min(Math.max(120, scrollHeight + 40), 300);\n      el.style.height = `${Math.min(scrollHeight, 260)}px`; // textarea grows\n      setHeight(newHeight); // node grows with textarea\n    }\n  }, [textValue]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vs-node\",\n    style: {\n      width: 260,\n      height: height,\n      position: 'relative',\n      transition: 'height 0.15s ease',\n      overflow: 'hidden'\n    },\n    children: [variables.map((v, i) => /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"target\",\n      position: Position.Left,\n      id: `${id}-${v}`,\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    }, v, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right,\n      id: `${id}-output`,\n      style: {\n        top: '50%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vs-node__title\",\n      children: \"Text\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"vs-label\",\n      style: {\n        flex: 1\n      },\n      children: [\"Text:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textRef,\n        className: \"vs-input\",\n        value: textValue,\n        onChange: e => setTextValue(e.target.value),\n        style: {\n          resize: 'none',\n          width: '100%',\n          minHeight: '60px',\n          lineHeight: 1.4,\n          overflowY: 'hidden',\n          // hides scrollbar until max height\n          background: '#2a2a34'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"2g5Y+u+utTWuZjf/hmFmdDZtV5o=\");\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Handle","Position","jsxDEV","_jsxDEV","TextNode","id","data","_s","textValue","setTextValue","text","variables","setVariables","height","setHeight","textRef","regex","found","Array","from","matchAll","map","m","Set","el","current","style","scrollHeight","newHeight","Math","min","max","className","width","position","transition","overflow","children","v","i","type","Left","top","length","fileName","_jsxFileName","lineNumber","columnNumber","Right","flex","ref","value","onChange","e","target","resize","minHeight","lineHeight","overflowY","background","_c","$RefreshReg$"],"sources":["/home/tom/Projects/Job Assignments/VectorShift/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Handle, Position } from 'reactflow';\n\nexport const TextNode = ({ id, data }) => {\n  const [textValue, setTextValue] = useState(data?.text || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const [height, setHeight] = useState(140);\n  const textRef = useRef(null);\n\n  // --- Parse {{variables}} into dynamic handles ---\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const found = Array.from(textValue.matchAll(regex)).map((m) => m[1]);\n    setVariables([...new Set(found)]);\n  }, [textValue]);\n\n  // --- Adjust textarea height dynamically ---\n  useEffect(() => {\n    const el = textRef.current;\n    if (el) {\n      el.style.height = 'auto'; // reset to recalc\n      const scrollHeight = el.scrollHeight;\n      const newHeight = Math.min(Math.max(120, scrollHeight + 40), 300);\n      el.style.height = `${Math.min(scrollHeight, 260)}px`; // textarea grows\n      setHeight(newHeight); // node grows with textarea\n    }\n  }, [textValue]);\n\n  return (\n    <div\n      className=\"vs-node\"\n      style={{\n        width: 260,\n        height: height,\n        position: 'relative',\n        transition: 'height 0.15s ease',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Dynamic variable handles */}\n      {variables.map((v, i) => (\n        <Handle\n          key={v}\n          type=\"target\"\n          position={Position.Left}\n          id={`${id}-${v}`}\n          style={{\n            top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n          }}\n        />\n      ))}\n\n      {/* Output handle */}\n      <Handle\n        type=\"source\"\n        position={Position.Right}\n        id={`${id}-output`}\n        style={{ top: '50%' }}\n      />\n\n      {/* Header */}\n      <div className=\"vs-node__title\">Text</div>\n\n      {/* Expanding text field */}\n      <label className=\"vs-label\" style={{ flex: 1 }}>\n        Text:\n        <textarea\n          ref={textRef}\n          className=\"vs-input\"\n          value={textValue}\n          onChange={(e) => setTextValue(e.target.value)}\n          style={{\n            resize: 'none',\n            width: '100%',\n            minHeight: '60px',\n            lineHeight: 1.4,\n            overflowY: 'hidden', // hides scrollbar until max height\n            background: '#2a2a34',\n          }}\n        />\n      </label>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}